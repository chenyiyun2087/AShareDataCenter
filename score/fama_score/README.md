# Fama-French 评分系统 (fama_score)

基于 Fama-French 五因子模型的增强型股票评分系统。

## 与 claude_score 对比

| 特性 | claude_score | fama_score |
|------|-------------|------------|
| 理论基础 | 技术面+基本面混合 | Fama-French 五因子 |
| 市值因子 | ❌ 无 | ✅ SMB (10分) |
| 投资因子 | ❌ 无 | ✅ CMA (质量维度) |
| 技术指标 | 15分 | 10分 |
| 资金筹码 | 20分 | 12分 |

## 评分规则 (总分 100)

### 1. 市值因子 SMB (10分) 🆕
小盘股溢价效应。

| 流通市值 | 分类 | 得分 |
|----------|------|------|
| < 30亿 | 微盘 | 10分 |
| 30-80亿 | 小盘 | 8分 |
| 80-200亿 | 中小盘 | 6分 |
| 200-500亿 | 中盘 | 4分 |
| 500-1000亿 | 大盘 | 2分 |
| > 1000亿 | 超大盘 | 1分 |

### 2. 动量因子 MOM (22分)
Carhart 动量因子 + 活跃度。

| 指标 | 权重 | 评分规则 |
|------|------|----------|
| **12月动量** | 6分 | 12个月涨幅排名前20%: 6分 \| 前40%: 4分 \| 前60%: 2分 |
| **1月反转** | 2分 | 近1月跌幅>5%: 2分 (反转预期) |
| **量比** | 4分 | 同 claude_score |
| **换手率** | 4分 | 同 claude_score |
| **MTM指标** | 4分 | 同 claude_score |
| **MTMMA交叉** | 2分 | 同 claude_score |

### 3. 价值因子 HML (18分)
Book-to-Market 价值效应。

| 指标 | 权重 | 评分规则 |
|------|------|----------|
| **PB倒数** | 8分 | 1/PB排名前20%: 8分 \| 前40%: 6分 \| 前60%: 4分 |
| **PE (TTM)** | 5分 | <15: 5分 \| <25: 3分 \| <40: 2分 |
| **PS (TTM)** | 5分 | <1.5: 5分 \| <3.0: 3分 \| <5.0: 1分 |

### 4. 盈利因子 RMW + 投资因子 CMA (22分)
盈利能力 + 投资保守程度。

| 指标 | 权重 | 评分规则 |
|------|------|----------|
| **ROE (TTM)** | 8分 | >20%: 8分 \| >15%: 6分 \| >10%: 4分 \| >5%: 2分 |
| **毛利率** | 5分 | >50%: 5分 \| >30%: 4分 \| >20%: 2分 |
| **资产负债率** | 4分 | <30%: 4分 \| <50%: 3分 \| <70%: 2分 |
| **资产增长率(CMA)** | 5分 | <5%: 5分 \| <15%: 3分 \| <25%: 1分 \| >25%: 0分 🆕 |

### 5. 技术因子 (10分)
精简版技术指标。

| 指标 | 权重 | 评分规则 |
|------|------|----------|
| **MACD** | 4分 | 同 claude_score |
| **KDJ (J值)** | 3分 | 同 claude_score |
| **RSI (6日)** | 3分 | 同 claude_score |

### 6. 资金因子 (10分)
主力资金+融资融券。

| 指标 | 权重 | 评分规则 |
|------|------|----------|
| **特大单净流入** | 5分 | 同 claude_score (权重不变) |
| **大单净流入** | 3分 | 同 claude_score |
| **融资融券** | 2分 | 同 claude_score |

### 7. 筹码因子 (8分)
筹码分布。

| 指标 | 权重 | 评分规则 |
|------|------|----------|
| **获利比例** | 5分 | 同 claude_score (权重调整) |
| **成本偏离** | 3分 | 同 claude_score (权重调整) |

---

## 数据表

| 维度 | 数据表 | 新增 |
|------|--------|------|
| 市值 | `dws_fama_size_score` | 🆕 |
| 动量 | `dws_fama_momentum_score` | 🆕 |
| 价值 | `dws_fama_value_score` | 🆕 |
| 质量 | `dws_fama_quality_score` | 🆕 |
| 技术 | `dws_fama_technical_score` | 🆕 |
| 资金 | `dws_fama_capital_score` | 🆕 |
| 筹码 | `dws_fama_chip_score` | 🆕 |

## 权重对比

```
claude_score: 动量25 + 价值20 + 质量20 + 技术15 + 资金10 + 筹码10 = 100
fama_score:   市值10 + 动量22 + 价值18 + 质量22 + 技术10 + 资金10 + 筹码8 = 100
```

## 使用方法

```python
from score.fama_score.score_query import FamaScoreQuery, get_engine

engine = get_engine(password='your_password')
q = FamaScoreQuery(engine)

# 对比两个评分系统
fama_top = q.get_top_stocks(20260206, top_n=50)
claude_top = claude_q.get_top_stocks(20260206, top_n=50)
```
